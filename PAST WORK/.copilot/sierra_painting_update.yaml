name: sierra_painting_update
description: >
  Governance config for dependency management, security monitoring,
  version drift limits, and update workflows for Sierra Painting v1.

standards:
  cadence:
    flutter: monthly
    node_functions: monthly
    webapp_node: monthly
    github_actions: monthly
    gradle_android: quarterly
    major_versions: annually
  security_response:
    critical_cve_days: 1
    high_cve_days: 7
    medium_cve_days: 30
  version_management:
    max_version_drift_percent: 5
    critical_min_versions:
      firebase_core: ">=4.0.0"
      firebase_auth: ">=5.0.0"
      firebase_performance: ">=0.11.0"
      flutter_riverpod: ">=2.5.0"
  breaking_changes:
    require_migration_guide: true
    require_rollback_plan: true
    require_release_notes: true
  quality_gates:
    require_lockfiles_committed: true
    require_zero_critical_or_high_vulns: true
    require_analysis_clean: true
    docs_updated_within_days: 60
validation:
  sections:
    - name: yaml_validity
      checks:
        - path_exists: ".copilot/sierra_painting_update.yaml"
        - yaml_is_valid: ".copilot/sierra_painting_update.yaml"
    - name: lockfiles
      checks:
        - path_exists: "pubspec.lock"
        - path_exists: "functions/package-lock.json"
        - path_exists: "firestore-tests/package-lock.json"
    - name: security
      checks:
        - npm_audit_ok: "functions"
        - npm_audit_ok: "firestore-tests"
    - name: versions_minimums
      checks:
        - dart_pkg_meets_min: {pkg: "firebase_core", min: "4.0.0"}
        - dart_pkg_meets_min: {pkg: "flutter_riverpod", min: "2.5.0"}
        - dart_pkg_meets_min: {pkg: "firebase_performance", min: "0.11.0"}
    - name: version_drift
      checks:
        - report_outdated_pub: true
        - report_outdated_npm: ["functions","firestore-tests"]
    - name: docs_completeness
      checks:
        - path_exists: "docs/UPDATES_EXECUTION.md"
        - path_exists: "docs/UPDATES.md"
        - path_exists: "docs/migrations/README.md"
    - name: automation_tooling
      checks:
        - workflow_exists: ".github/workflows/updates.yml"
        - dependabot_exists: ".github/dependabot.yml"
